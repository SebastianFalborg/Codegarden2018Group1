@inherits Umbraco.Web.Mvc.UmbracoTemplatePage<ContentModels.LoginPage>
@using ContentModels = Umbraco.Web.PublishedContentModels;


@using System.Web.Mvc.Html
@using Umbraco.Web
@using Umbraco.Web.Models
@using Umbraco.Web.Controllers



@{
    Layout = "Shared/_Layout.cshtml";
    //if (IsPost)
    //{
    //    if (Request["username"] != null)
    //    {
    //        var un = Request["username"];
    //        var pw = Request["password"];
    //        if (Members.Login(un, pw))
    //        {
    //            Response.Redirect("/user-area/");
    //        }
    //    }
    //}

    var loginModel = new LoginModel();
    loginModel.RedirectUrl = "/user-area/";

}

<div class="main-banner fullscreen-banner cover" style="background-image:url('@Model.Content.LoginImage.Url')">
    <div class="image-overlay"></div>
    <div class="banner-content">
        <div class="user-area">
            <h1>User area</h1>
            @if (!Members.IsLoggedIn())
            {
                <div class="user-forms">
                    <div class="login-user" data-login-form>
                        <h4>Please login</h4>
                        @*@using (Html.BeginForm("Logon", "Account"))
                            {
                                <form action="" method="post">
                                    <input type="text" name="username" placeholder="Username" required />
                                    <input type="password" name="password" placeholder="Password" required />
                                    <button type="submit" name="loginuser" class="main-link green-btn">Login</button>
                                </form>
                            }*@



                        @using (Html.BeginUmbracoForm<UmbLoginController>("HandleLogin"))
                        {

                            @Html.ValidationSummary("loginModel", true)
                            @*@Html.ValidationSummary(true)*@

                            @Html.LabelFor(m => loginModel.Username)
                            @Html.TextBoxFor(m => loginModel.Username)
                            @Html.ValidationMessageFor(m => loginModel.Username)
                            <br />

                                @Html.LabelFor(m => loginModel.Password)
                                @Html.PasswordFor(m => loginModel.Password)
                                @Html.ValidationMessageFor(m => loginModel.Password)
                                <br />

                                <button type="submit" name="loginuser" class="main-link green-btn">Login</button>
                                @Html.HiddenFor(m => loginModel.RedirectUrl)
                        }

                        <span data-go-create>Or create a user</span>
                    </div>
                    <div class="create-user" data-create-form>
                        <h4>Create user</h4>
                        @Html.Partial("_CreateUser")
                        <span data-go-login>Go back</span>
                    </div>
                </div>
            }
            else
            {
                <h2>Du er logget ind</h2>
            }
        </div>
    </div>
</div>
